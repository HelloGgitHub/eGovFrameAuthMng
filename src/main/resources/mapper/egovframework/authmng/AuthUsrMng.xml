<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="egovframework.com.auth.dao.AuthUsrDao">

    <select id="selectAuthUsrList" parameterType="Map" resultType="hashMap">
			SELECT AUTHOR_CODE 
			     , USR_ID 
			     , AUTHOR_GRP_CODE 
			     , ADD_DT
			  FROM COMTNAUTHORUSR
			 WHERE AUTHOR_CODE           = '${AUTHCD}'
    </select>

    <select id="selectUsrAuthList" parameterType="Map" resultType="hashMap">
			SELECT AUTHOR_CODE 
			     , USR_ID 
			     , AUTHOR_GRP_CODE 
			     , ADD_DT
			  FROM COMTNAUTHORUSR
			 WHERE USR_ID           = '${USR_ID}'
    </select>
    
    <select id="selectAuthUsrCnt" parameterType="Map" resultType="int">
			SELECT COUNT(*) CNT
			  FROM COMTNAUTHORUSR
			 WHERE AUTHOR_CODE = '${AUTHCD}'
			   AND USR_ID = '${USR_ID}'
    </select>
    
    <insert id="insertAuthUsr" parameterType="hashMap">
			INSERT INTO COMTNAUTHORUSR (
				AUTHOR_CODE
				, USR_ID
				, AUTHOR_GRP_CODE
				, ADD_DT
			) 
			SELECT AUTHOR_CODE
			     , '${USR_ID}'
			     , ''
			     , DATE_FORMAT(CURRENT_TIMESTAMP, '%Y%m%d%H%i%s')
			  FROM COMTNAUTHORINFO
			 where AUTHOR_CODE = '${AUTHCD}'
    </insert>

    <delete id="deleteAuthUsr" parameterType="hashMap">
			DELETE FROM COMTNAUTHORUSR
			 WHERE AUTHOR_CODE           = '${AUTHCD}'
			    AND USR_ID           = '${USR_ID}'
    </delete>
    
    
</mapper> 